<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MedShield - Medical Assistant</title>
    <link rel="stylesheet" href="/static/css/chatbot.css">
</head>
<body>
    <div class="app">
        <header class="topbar">
            <div class="topbar-inner">
                <div class="brand" aria-label="MedShield">
                    <span class="brand-logo">ğŸ¥</span>
                    <span class="brand-name">MedShield</span>
                </div>

                <div class="topbar-right">
                    <span class="pill pill--privacy" title="No PII leaves the local environment">
                        ğŸ”’ Privacy protected
                    </span>
                </div>
            </div>
        </header>

        <main class="chat">
            <div class="chat-scroll" id="chatMessages">
                <!-- Welcome message (assistant row) -->
                <div class="chat-row chat-row--assistant">
                    <div class="chat-row-inner">
                        <div class="avatar" aria-hidden="true">ğŸ¤–</div>
                        <div class="chat-content">
                            <div class="chat-text">
                                <p>Hello! I'm MedShield, your privacy-preserving medical assistant.</p>
                                <p>I can help you with:</p>
                                <ul>
                                    <li>ğŸ“… Booking appointments</li>
                                    <li>ğŸ”„ Scheduling follow-ups</li>
                                    <li>ğŸ“‹ Generating medical summaries</li>
                                    <li>â“ General medical queries</li>
                                </ul>
                                <p>How can I help?</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="typing" id="typingIndicator" style="display:none;">
                <div class="chat-row chat-row--assistant chat-row--typing">
                    <div class="chat-row-inner">
                        <div class="avatar" aria-hidden="true">ğŸ¤–</div>
                        <div class="chat-content">
                            <div class="typing-dots" aria-label="Assistant is typing">
                                <span></span><span></span><span></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="composer">
                <div class="composer-inner">
                    <form id="chatForm" class="composer-form">
                        <textarea
                            id="messageInput"
                            rows="1"
                            maxlength="1000"
                            placeholder="Message MedShieldâ€¦"
                        ></textarea>
                        <button type="submit" class="composer-send" id="sendButton" aria-label="Send">
                            <span aria-hidden="true">â¤</span>
                        </button>
                    </form>
                    <div class="composer-hint">Tip: include your name, age, and medical concern for better assistance.</div>
                </div>
            </div>
        </main>

        <!-- Privacy Visualization Sidebar (collapsed by default to keep chat full-width) -->
        <aside class="privacy-sidebar collapsed" id="privacySidebar" aria-label="Privacy Monitor">
            <div class="sidebar-header">
                <h3>ğŸ” Privacy Monitor</h3>
                <div class="sidebar-actions">
                    <button class="icon-button" id="refreshPrivacy" title="Refresh">ğŸ”„</button>
                    <button class="toggle-button" id="toggleSidebar" aria-label="Hide privacy monitor">âˆ’</button>
                </div>
            </div>
            <div class="sidebar-content" id="sidebarContent">
                <p class="sidebar-description">Track how your data is protected at every step.</p>
                <div id="privacySteps" class="privacy-steps"></div>
            </div>
        </aside>

        <button class="show-privacy-button" id="showPrivacyButton">
            ğŸ” Privacy
        </button>
    </div>

    <script src="/static/js/chat.js"></script>
    <script src="/static/js/visualization.js"></script>
</body>
</html>
